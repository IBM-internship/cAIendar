@{
    ViewData["Title"] = "AI Календар";
}

<!-- FullCalendar CSS -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />

<!-- FullCalendar JS -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>

<div class="container mt-4">
    <div id="calendar"></div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const calendarEl = document.getElementById('calendar');

        const calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            locale: 'bg', // Bulgarian locale example
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            selectable: true,
            events:{
                url: '/Calendar/All',
                method: 'GET',
                extraParams: {},
                failure: function () {
                    alert('There was an error while fetching events!');},
                credentials: 'include'}, // ← this is important!'/Calendar/All', // Endpoint for fetching events
            select: function (info) {
                const start = encodeURIComponent(info.startStr);
                const end = encodeURIComponent(info.endStr);

                // Redirect to the Create Event page with the selected range
                window.location.href = `/Events/Create?start=${start}&end=${end}`;
            },

            eventClick: function (info) {
                alert("Clicked event: " + info.event.title);
            }
        });

        calendar.render();
    });
</script>

@*

<!-- Modal for Creating New Event -->
<div class="modal fade" id="eventModal" tabindex="-1" aria-labelledby="eventModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form id="eventForm">
                <div class="modal-header">
                    <h5 class="modal-title" id="eventModalLabel">Създай събитие</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="start" />
                    <input type="hidden" id="end" />
                    <div class="mb-3">
                        <label for="title" class="form-label">Заглавие</label>
                        <input type="text" class="form-control" id="title" required />
                    </div>
                    <div class="mb-3">
                        <label for="description" class="form-label">Описание</label>
                        <textarea class="form-control" id="description"></textarea>
                    </div>
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="isAllDay" />
                        <label class="form-check-label" for="isAllDay">Целодневно</label>
                    </div>
                    <!-- Add more fields as needed (Color, Location, etc.) -->
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Създай</button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
    #calendar {
        max-width: 100%;
    }

    .fc .fc-toolbar-title {
        font-size: 1.5rem;
        font-weight: 600;
    }

    .fc-daygrid-day-number {
        font-weight: 500;
        color: #0d6efd; /* Bootstrap primary */
    }

    .fc-daygrid-day-frame {
        padding: 6px;
    }

    .fc-theme-standard .fc-scrollgrid {
        border: 1px solid #dee2e6; /* Bootstrap border color */
    }

    .fc .fc-button-primary {
        background-color: #0d6efd;
        border-color: #0d6efd;
    }

        .fc .fc-button-primary:hover {
            background-color: #0b5ed7;
            border-color: #0a58ca;
        }
</style>

<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet" />

<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js'></script>

<script>
        document.addEventListener('DOMContentLoaded', function () {
        const calendarEl = document.getElementById('calendar');
        const calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            locale: 'bg',
            selectable: true,
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            events: [
                {
                    title: 'Събитие пример',
                    start: new Date().toISOString().split('T')[0]
                }
            ],
            select: function (info) {
                const title = prompt('Заглавие на събитието:');
                if (title) {
                    calendar.addEvent({
                        title: title,
                        start: info.start,
                        end: info.end,
                        allDay: info.allDay
                    });
                }
            }
        });

        calendar.render();
    });

</script>
